{"version":3,"sources":["app.js","environment.js","main.js","facets/facets.js","common/messages.js","common/multi-subscriber.js","common/request-interceptor.js","common/request-log.js","resources/index.js","home/home.js","simple/simple.js","services/search-api.js","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/app.html","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/site.css","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/common/request-log.html","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/common/request-log.css","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/home/home.css","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/home/home.html","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/facets/facets.css","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/facets/facets.html","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/simple/simple.css","/Users/loctanvo/Projects/AzureSearchDemo/searchapps/src/simple/simple.html"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","nav","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Facets","api","subscriber","abvFacetMatcher","a","b","from","to","query","results","count","facets","selectedBrewery","selectedStyle","selectedAbv","selectedCreated","observe","onChanged","search","clear","faceted","buildFilter","result","allFilters","buildBreweryFilter","buildStyleFilter","buildAbvFilter","buildCreatedFilter","reduce","aggregated","current","trim","replace","attached","detached","dispose","Date","toString","toISOString","inject","RequestSent","requestMessage","request","ResponseReceived","responseMessage","response","MultiCollectionSubscriber","bindingEngine","observers","subscriptions","collection","forEach","observer","collectionObserver","x","push","execute","subscribe","change","RequestInterceptor","ea","message","console","log","publish","requestError","error","JSON","parse","responseError","RequestLog","stringify","msg","Home","Simple","queryText","rawResult","rawJson","raw","tired","_","$","autocomplete","source","suggest","term","minLength","select","event","ui","item","value","data","_renderItem","ul","attr","append","label","appendTo","SearchApi","interceptor","httpClient","withBaseUrl","withParams","withHeader","withInterceptor","post","jsonResult","resolve","description","labelmediumimage","style","stylename","brewery","breweries","suggesterName","highlightPreTag","highlightPostTag","filter","jsonResponse","mapped","abv","created","getFullYear","alcoholPercentage"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n    configureRouter(config, router) {\n        this.router = router;\n        config.title = 'Azure Search Demo';\n        config.map([\n            { route: ['', 'home'], name: 'home', moduleId: 'home/home', title: 'Home' },\n            { route: 'simple', name: 'simple', moduleId: 'simple/simple', title: 'Simple', nav: true },\n            { route: 'facets', name: 'facets', moduleId: 'facets/facets', title: 'Faceted Search', nav: true }\n        ]);\n    }\n}","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { SearchApi } from \"services/search-api\";\nimport { MultiCollectionSubscriber } from \"common/multi-subscriber\";\n\n\nexport class Facets {\n    static inject = [SearchApi, MultiCollectionSubscriber];\n    constructor(api, subscriber) {\n        this.api = api;\n        this.subscriber = subscriber;\n\n        this.query = \"\";\n        this.results = [];\n        this.count = null;\n        this.facets = null;\n\n        this.selectedBrewery = [];\n        this.selectedStyle = [];\n        this.selectedAbv = [];\n        this.selectedCreated = [];\n\n        this.subscriber\n            .observe([this.selectedAbv])\n            .onChanged(change => this.search());\n    }\n\n    abvFacetMatcher = (a, b) => a.from === b.from && a.to === b.to;\n\n    clear() {\n        this.query = \"\";\n        this.results = [];\n        this.count = null;\n        this.facets = null;\n\n        this.selectedBrewery = [];\n        this.selectedStyle = [];\n        this.selectedAbv = [];\n        this.selectedCreated = [];\n\n        this.search();\n    }\n\n    search() {\n        this.api\n            .faceted(this.query, this.buildFilter())\n            .then(result => {\n                this.count = result.count;\n                this.results = result.results;\n                this.facets = result.facets;\n            })\n    }\n\n    buildFilter() {\n        var allFilters = [\n            this.buildBreweryFilter(),\n            this.buildStyleFilter(),\n            this.buildAbvFilter(),\n            this.buildCreatedFilter()\n        ];\n\n        return allFilters.reduce((aggregated, current) => current ? aggregated + ` (${current}) and` : aggregated, \"\")\n            .trim()\n            .replace(/ and$/, \"\");\n    }\n\n    attached() {\n        this.search();\n    }\n\n    detached() {\n        this.subscriber.dispose();\n    }\n\n    buildBreweryFilter() {\n        return this.selectedBrewery\n            .reduce((aggregated, current) => aggregated + ` (breweries/any(t: t eq '${current}')) or`, \"\")\n            .trim()\n            .replace(/ or$/, \"\");\n    }\n\n    buildAbvFilter() {\n        return this.selectedAbv\n            .reduce((aggregated, current) => {\n                var from = current.from;\n                var to = current.to;\n\n                if (from && to) {\n                    return aggregated + ` (abv ge ${from} and abv lt ${to}) or`;\n                }\n                else if (from) {\n                    return aggregated + ` (abv ge ${from}) or`;\n                }\n                else if (to) {\n                    return aggregated + ` (abv lt ${to}) or`\n                }\n\n            }, \"\")\n            .trim()\n            .replace(/ or$/, \"\");\n    }\n\n    buildStyleFilter() {\n        return this.selectedStyle\n            .reduce((aggregated, current) => aggregated + ` (stylename eq '${current}') or`, \"\")\n            .trim()\n            .replace(/ or$/, \"\");\n    }\n\n\n    buildCreatedFilter() {\n        return this.selectedCreated\n            .reduce((aggregated, current) => aggregated + ` (created ge ${new Date(current.toString()).toISOString()} and created lt ${new Date((current + 1).toString()).toISOString()}) or`, \"\")\n            .trim()\n            .replace(/ or$/, \"\");\n    }\n}","export class RequestSent {\n    constructor(requestMessage) {\n        this.request = requestMessage;\n    }\n}\n\nexport class ResponseReceived {\n    constructor(responseMessage) {\n        this.response = responseMessage;\n    }\n}","import { BindingEngine } from \"aurelia-binding\";\n\nexport class MultiCollectionSubscriber {\n    static inject = [BindingEngine];\n\n    constructor(bindingEngine) {\n        this.bindingEngine = bindingEngine;\n        this.observers = []\n        this.subscriptions = [];\n    }\n\n    observe(collection) {\n        collection.forEach(x => {\n            let observer = this.bindingEngine.collectionObserver(x);\n            this.observers.push(observer)\n        });\n\n        return this;\n    }\n\n    onChanged(execute) {\n        this.observers\n            .forEach(x => this.subscriptions.push(x.subscribe(change => execute(change))));\n    }\n\n    dispose() {\n        this.subscriptions.forEach(x => x.dispose());\n        this.observers = [];\n    }\n}","import { EventAggregator } from \"aurelia-event-aggregator\";\nimport { RequestSent, ResponseReceived } from \"./messages\";\n\nexport class RequestInterceptor {\n    static inject = [EventAggregator]\n\n    constructor(ea) {\n        this.ea = ea;\n    }\n\n    request(message) {\n        console.log(message);\n        this.ea.publish(new RequestSent(message));\n        return message;\n    }\n\n    requestError(error) {\n        console.log(error);\n        throw error;\n    }\n\n    response(message) {\n        console.log(message);\n        this.ea.publish(new ResponseReceived(JSON.parse(message.response)));\n        return message;\n    }\n\n    responseError(error) {\n        console.log(error);\n        throw error;\n    }\n}","import { EventAggregator } from 'aurelia-event-aggregator';\nimport { RequestSent, ResponseReceived } from './messages';\n\nexport class RequestLog {\n    static inject = [EventAggregator];\n\n    constructor(ea) {\n        this.ea = ea;\n        this.request = '';\n        this.response = '';\n\n        ea.subscribe(RequestSent, msg => this.request = JSON.stringify(msg.request, null, 4));\n        ea.subscribe(ResponseReceived, msg => this.response = JSON.stringify(msg.response, null, 4));\n    }\n\n    get hasValues() {\n        return this.request || this.response;\n    }\n\n}","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Home {\n\n}","import { SearchApi } from 'services/search-api';\n\nexport class Simple {\n    static inject = [SearchApi];\n\n    constructor(api) {\n        this.api = api;\n        this.results = [];\n        this.queryText = '';\n        this.rawResult = '';\n        this.count = null;\n        this.rawJson = '';\n    }\n\n    get hasResults() {\n        return this.rawResult;\n    }\n\n    search() {\n        this.api\n            .search(this.queryText)\n            .then(x => {\n                this.count = x.count;\n                this.results = x.results;\n                this.rawResult = JSON.stringify(x.raw, null, 4);\n            });\n    }\n\n    tired() {\n        this.queryText = \"\\\"real kick\\\"\";\n        this.search();\n    }\n\n    attached() {\n        let _ = this;\n        $(\".search-input\").autocomplete({\n                source: function(request, response) {\n                    _.api\n                        .suggest(request.term)\n                        .then(results => response(results));\n                },\n                minLength: 2,\n                select: function(event, ui) {\n                    _.queryText = ui.item.value;\n                }\n            })\n            .data('ui-autocomplete')\n            ._renderItem = function(ul, item) {\n                item.value = item.value.replace(/<\\/?\\w*>/g, \"\");\n\n                return $(\"<li>\")\n                    .attr(\"data-value\", item.value)\n                    .append(item.label)\n                    .appendTo(ul);\n            }\n    }\n}","import { HttpClient } from \"aurelia-http-client\";\nimport { RequestInterceptor } from \"../common/request-interceptor\";\n\nexport class SearchApi {\n    static inject = [RequestInterceptor];\n\n    constructor(interceptor) {\n        this.httpClient = new HttpClient()\n            .configure(x => {\n                x.withBaseUrl(\"https://azuresearchfree.search.windows.net/indexes/beersv1/docs\")\n                x.withParams({ \"api-version\": \"2015-02-28\" });\n                x.withHeader(\"api-key\", \"5655AB55C4E55DBE67C691F376482D8C\");\n                x.withInterceptor(interceptor)\n            })\n    }\n\n    search(query) {\n        return new Promise(resolve => {\n            this.httpClient\n                .post(\"/search\", {\n                    count: true,\n                    search: query\n                })\n                .then(result => {\n                    let jsonResult = JSON.parse(result.response);\n                    resolve({\n                        count: jsonResult[\"@odata.count\"],\n                        results: jsonResult[\"value\"].map(x => {\n                            return {\n                                name: x.name,\n                                description: x.description,\n                                label: x.labelmediumimage,\n                                style: x.stylename,\n                                brewery: x.breweries[0]\n                            }\n                        })\n                    });\n                });\n        });\n    }\n\n    suggest(query) {\n        return new Promise(resolve => {\n            this.httpClient\n                .post(\"/suggest\", {\n                    search: query,\n                    suggesterName: \"suggestBeerName\",\n                    highlightPreTag: \"<strong>\",\n                    highlightPostTag: \"</strong>\"\n                })\n                .then(result => {\n                    var results = JSON.parse(result.response).value;\n                    resolve(results.map(x => x[\"@search.text\"]));\n                });\n        })\n    }\n\n    faceted(query, filter) {\n        return new Promise(resolve => {\n            this.httpClient\n                .post(\"/search\", {\n                    facets: [\n                        \"stylename\",\n                        \"abv,values:5|10|15\",\n                        \"breweries\",\n                        \"created,interval:year\"\n                    ],\n                    search: query,\n                    filter: filter,\n                    count: true\n                })\n                .then(result => {\n                    var jsonResponse = JSON.parse(result.response);\n                    var facets = jsonResponse[\"@search.facets\"];\n                    var mapped = {\n                        facets: {\n                            stylename: facets.stylename,\n                            abv: facets.abv,\n                            breweries: facets.breweries,\n                            created: facets.created.map(x => {\n                                return {\n                                    value: new Date(x.value).getFullYear(),\n                                    count: x.count\n                                }\n                            }),\n                        },\n                        results: jsonResponse.value.map(x => {\n                            return {\n                                name: x.name,\n                                description: x.description,\n                                alcoholPercentage: x.abv,\n                                label: x.labelmediumimage,\n                                style: x.stylename,\n                                brewery: x.breweries[0]\n                            }\n                        }),\n                        count: jsonResponse[\"@odata.count\"],\n                    }\n\n                    resolve(mapped);\n                });\n        })\n    }\n}",null,null,null,null,null,null,null,null,null,null],"sourceRoot":"../src"}